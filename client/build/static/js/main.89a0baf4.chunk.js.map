{"version":3,"sources":["components/AppLayout.tsx","hooks/useFetcher.ts","components/ProductMediaView.tsx","components/ProductCard.tsx","components/PromotionCard.tsx","pages/ProductsListPage.tsx","hooks/useProducts.ts","hooks/usePromotion.ts","hooks/useVendors.ts","pages/ProductDetailsPage.tsx","hooks/useProductDetails.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Content","Layout","AppLayout","children","className","FETCHER_STATUS_IDLE","FETCHER_STATUS_FETCHING","useFetcher","endpoint","useState","content","setContent","status","setStatus","useEffect","fetch","then","response","json","items","catch","error","console","ProductMediaView","media","height","onClick","style","padding","type","controls","src","url","width","objectFit","cursor","id","ProductCard","product","vidioDisplaying","setVideoDisplaying","filter","cover","Meta","title","name","description","vendor","PromotionCard","promotion","backgroundColor","text","ProductsListPage","history","useHistory","search","setFilter","products","productsStatus","usePromotion","map","useVendors","vendors","productsWithPromotion","reduce","item","index","order","direction","size","layout","onValuesChange","changedValues","allValues","Item","placeholder","allowClear","Option","value","grid","gutter","column","dataSource","loading","renderItem","push","ProductsDetailsPage","productId","useParams","productStatus","extra","to","href","App","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.89a0baf4.chunk.js","sourcesContent":["import React from 'react';\nimport { Layout } from 'antd';\n\nconst { Content } = Layout;\n\nexport default function AppLayout({ children }: { children: React.ReactNode }) {\n  return (\n    <Layout>\n      <Content className=\"AppLayout-content\">\n        {children}\n      </Content>\n    </Layout>\n  );\n}\n","import { useState, useEffect } from 'react';\n\nexport const FETCHER_STATUS_IDLE = 'idle';\nexport const FETCHER_STATUS_FETCHING = 'fetching';\n\nexport default function useFetcher<I>(endpoint: string): [I | null, string] {\n  const [content, setContent] = useState<I | null>(null);\n  const [status, setStatus] = useState<string>(FETCHER_STATUS_IDLE);\n\n  function fetchContent() {\n    setStatus(FETCHER_STATUS_FETCHING);\n    fetch(endpoint)\n      .then(response => response.json())\n      .then(items => {\n        setStatus(FETCHER_STATUS_IDLE);\n        setContent(items as I);\n      })\n      .catch(error => {\n        setStatus(FETCHER_STATUS_IDLE)\n        console.error(error);\n      });\n  }\n\n  useEffect(() => {\n    if (endpoint) {\n      fetchContent();\n    }\n  }, [endpoint]);\n\n  return [content, status];\n}\n","import React from 'react';\nimport { ProductMedia } from '../types';\n\nexport default function ProductMediaView({ media, height=150, onClick }: { media: ProductMedia, height?: number, onClick?: () => void }) {\n  return (\n    <div key={media.id} onClick={onClick} style={{ padding: '5px' }}>\n      {media.type === 'video' ? (\n        <video controls src={media.url} width=\"100%\" height={height} />\n      ) : (\n        <img src={media.url} width=\"100%\" height={height} style={{ objectFit: 'contain', cursor: 'pointer' }} />\n      )}\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { Card } from 'antd';\nimport { Product } from '../types';\nimport ProductMediaView from './ProductMediaView';\n\nexport default function ProductCard({ product, onClick }: { product: Product, onClick?: () => void }) {\n  const [vidioDisplaying, setVideoDisplaying] = useState<boolean>(false);\n\n  const [media] = product.media.filter(media => {\n    if (vidioDisplaying) {\n      return media.type === 'video';\n    }\n    return media.type === 'image';\n  });\n\n  return (\n    <Card\n      cover={<ProductMediaView media={media} onClick={() => setVideoDisplaying(true)} />}\n      onClick={onClick}\n    >\n      <Card.Meta title={product.name} description={product.vendor} />\n    </Card>\n  );\n}\n","import React, { useState } from 'react';\nimport { Card } from 'antd';\nimport { Promotion } from '../types';\n\nexport default function PromotionCard({ promotion, onClick }: { promotion: Promotion, onClick?: () => void }) {\n  return (\n    <Card\n      style={{ height: 257, backgroundColor: '#f0f0f0' }}\n      onClick={onClick}\n    >\n      <Card.Meta title={promotion.text} />\n    </Card>\n  );\n}\n","import React, { useState } from 'react';\nimport {  List, Form, Select, Input, Space } from 'antd';\nimport AppLayout from '../components/AppLayout';\nimport { useHistory } from \"react-router-dom\";\nimport useProducts from '../hooks/useProducts';\nimport useVendors from '../hooks/useVendors';\nimport ProductCard from '../components/ProductCard';\nimport { FETCHER_STATUS_FETCHING } from '../hooks/useFetcher';\nimport usePromotion from '../hooks/usePromotion';\nimport { Product, Promotion } from '../types';\nimport PromotionCard from '../components/PromotionCard';\n\nfunction ProductsListPage() {\n  const history = useHistory();\n  const [filter, setFilter] = useState({ search: '', vendor: '' });\n  const [products, productsStatus] = useProducts(`/products?search=${filter.search || ''}&vendor=${filter.vendor || ''}`);\n  const [promotion] = usePromotion(`/promotion`);\n  const [vendors] = useVendors('/vendors');\n  \n  const productsWithPromotion = products?.reduce<{ item: Product|Promotion, type: string }[]>((items, item, index) => {\n    if (promotion && promotion.order === index + 1) {\n      return [...items, { item, type: 'product' }, { item: promotion, type: 'promotion' }];\n    }\n    return [...items, { item, type: 'product' }];\n  }, []);\n  \n  return (\n    <AppLayout>\n      <Space direction=\"vertical\" size=\"middle\">\n        <Form layout=\"inline\" onValuesChange={(changedValues, allValues) => setFilter(allValues)}>\n          <Form.Item name=\"search\">\n            <Input placeholder=\"Search\" />\n          </Form.Item>\n          <Form.Item name=\"vendor\">\n            <Select\n              allowClear\n              style={{ width: 200 }}\n              placeholder=\"Vendor\"\n            >\n              {vendors.map(vendor => <Select.Option key={vendor.name} value={vendor.name}>{vendor.name}</Select.Option>)}\n            </Select>\n          </Form.Item>\n        </Form>\n        <List\n          grid={{ gutter: 16, column: 4 }}\n          dataSource={productsWithPromotion || []}\n          loading={productsStatus === FETCHER_STATUS_FETCHING}\n          renderItem={item => (\n            <List.Item>\n              {item.type === 'product' ? (\n                <ProductCard product={item.item as Product} onClick={() => history.push(`/products/${(item.item as Product).id}`)} />\n              ) : (\n                <PromotionCard promotion={item.item as Promotion} />\n              )}\n            </List.Item>\n          )}\n        />\n      </Space>\n    </AppLayout>\n  );\n}\n\nexport default ProductsListPage;\n","import useFetcher from './useFetcher';\nimport { Product } from '../types';\n\nexport default function useProducts(endpoint: string) {\n  return useFetcher<Product[]>(endpoint);\n}\n","import useFetcher from './useFetcher';\nimport { Promotion } from '../types';\n\nexport default function usePromotion(endpoint: string) {\n  return useFetcher<Promotion>(endpoint);\n}\n","import useFetcher from './useFetcher';\nimport { Vendor } from '../types';\n\nexport default function useProducts(endpoint: string): [Vendor[], string] {\n  const [items, status] = useFetcher<string[]>(endpoint);\n  return [items ? items.map<Vendor>(name => ({ name })) : [], status];\n}\n","import React from 'react';\nimport { Link, useParams } from \"react-router-dom\";\nimport { Card, List } from 'antd';\nimport AppLayout from '../components/AppLayout';\nimport useProductDetails from '../hooks/useProductDetails';\nimport ProductMediaView from '../components/ProductMediaView';\nimport { FETCHER_STATUS_FETCHING } from '../hooks/useFetcher';\n\nfunction ProductsDetailsPage() {\n  const { productId } = useParams<{ productId: string }>();\n  const [product, productStatus] = useProductDetails(`/products/${productId}`);\n  \n  return (\n    <AppLayout>\n      <Card title={product?.name} extra={<Link to=\"/\"><a href=\"#\">Back</a></Link>}>\n        <h1>{product?.name}</h1>\n        <p>Vendor: {product?.vendor}</p>\n        <p>Order: {product?.order}</p>\n        <h2>Media:</h2>\n        <List\n          dataSource={product?.media || []}\n          loading={productStatus === FETCHER_STATUS_FETCHING}\n          renderItem={media => (\n            <List.Item>\n              <ProductMediaView key={media.id} media={media} height={300} />\n            </List.Item>\n          )}\n        />\n      </Card>\n    </AppLayout>\n  );\n}\n\nexport default ProductsDetailsPage;\n","import useFetcher from './useFetcher';\nimport { Product } from '../types';\n\nexport default function useProductDetails(endpoint: string) {\n  return useFetcher<Product>(endpoint);\n}\n","import React from 'react';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport ProductsListPage from './pages/ProductsListPage';\nimport ProductsDetailsPage from './pages/ProductDetailsPage';\n\nfunction App() {  \n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/products/:productId\" component={ProductsDetailsPage} />\n        <Route path=\"/\" component={ProductsListPage} />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}